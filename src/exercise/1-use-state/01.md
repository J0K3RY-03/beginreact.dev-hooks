# useState

`useState` est le hook **le plus utilisé** dans React (et le plus simple).

Il a un seul but :

> Garder un état dans un composant synchronisé avec l'interface.

Pour faire en sorte que ton composant soit toujours à jour, il faut que React
connaisse le moment où tu update le state. C'est pour cette raison que la création
d'un state se fait avec :

```js
const [state, setState] = useState(initialState);
```

`useState` retourne un tableau de deux éléments :

- Le `current state` de cette variable, que l'`initial state` définit par défaut
- La `set function` qui va changer le state avec n'importe quelle autre valeur.

Donc pour update le state il faut utiliser `setState(newState)`.

[📖 useState](https://beta.reactjs.org/apis/usestate)

## Exercice 1 - Simple useState

Ajoute un state pour que l'application te dise bonjour avec ton nom en temps réel.

Instructions dans le fichier.

- 💌 Tu comprends comment basiquement créer un state.

## Extra 2 - Ajout d'un nouveau state

Ajoute une checkbox qui, quand elle est activée, va afficher le prénom **inversé**.

- Melvyn -> nyvyleM
- Jean -> naeJ

🦁 Tu peux ajouter une checkbox (`<input type="checkbox" />`) **controller**.

Attention, il te faut rajouter un nouveau state.
Et à aucun moment il faut inverser la valeur du state `name` (non pas que ce serait
une erreur, juste que ce n'est pas mon but avec mon exercice).

[📖 Comment inverser une string en JS](https://www.youtube.com/watch?v=ygP1PMkDz0I)

- 💌 Tu apprends ici à gérer un affichage d'état en fonction d'autres états.
- 💌 Tu apprends aussi à gérer un boolean en fonction de sa valeur précédente.

## Extra 3 - Stocker chaque changement de notre state

Notre state change, il faut stocker ce changement dans un autre state et les
afficher sous forme de liste

```jsx
<ul>
  {nameHistory.map((name, i) => (
    <li key={i}>{name}</li>
  ))}
</ul>
```

💡 Je mets `key={i}` et pas `key={name}` car notre liste ne change jamais d'ordre
et qu'un nom peut revenir plusieurs fois.

💡 Il ne faut pas utiliser `nameHistory.push`.

[📖 Alors comment faire ?](https://bobbyhadz.com/blog/react-push-to-state-array)

- 💌 Tu apprends à ajouter dans une liste.
- 💌 Tu comprendras le lifecycle des hooks avec un bug expliqué.

## Extra 4 - Supprimer des "NameHistory"

Quand tu cliques sur un historique, tu vas supprimer celui-ci de la liste.

```jsx
<ul>
  {nameHistory.map((name, i) => (
    <li key={i} onClick={() => deleteHistory(i)}>
      {name}
    </li>
  ))}
</ul>
```

Il te faut rajouter la fonction `deleteHistory` qui va supprimer le bon élément
de la liste en fonction de l'index.

⚠️ Notre composant devient **complexe**. Crée un hooks `useStateHistory`
et met tout ce qui a un rapport avec l'historique dedans.

- 💌 Tu apprends à supprimer dans une liste.
- 💌 Tu apprends à correctement utiliser les custom hooks.
